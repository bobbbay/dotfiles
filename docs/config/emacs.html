<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-07-09 Fri 22:54 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
@import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i");
/* Set variables */:root {    --font-size-1: 2rem;    --font-size-2: 1.5rem;    --font-size-3: 1.15rem;    --font-size-4: 1rem;    --font-size-small: 0.8rem;    --font-size-xsmall: 0.6rem;}/* Set padding and margin */html, body{    padding: 0;    margin: 0;    background-color: #fdfdfd;}/* Header margin */h2{margin-top: 2rem; margin-bottom: 1.5rem;}h3{margin-top: 1rem; margin-bottom: 1rem;}h4{margin-top: 1rem; margin-bottom: 1rem;}/* ------------------------- */::selection {    background-color: purple;    color: white;}html, body{    font-family: "Source Sans Pro", Helvetica, sans-serif;		font-weight: 300;}h1{font-size: var(--font-size-1);}h2{font-size: var(--font-size-2);}h3{font-size: var(--font-size-3);}h4{font-size: var(--font-size-3);}h5{font-size: var(--font-size-3);}h1 > .subtitle{    font-size: var(--font-size-3);}h1, h2, h3, h4, h5, h6 {		font-weight: 300;		letter-spacing: -0.03em;}.outline-2 > h2, #table-of-contents > h2{    text-align: center;}/* Table of contents */#table-of-contents ul{    list-style-type:none;    margin: 0;}#table-of-contents .tag{    display: none;}.outline-3{    border-bottom: 1px solid #CCC;}.outline-2 > h2{    grid-row-start: 1;    grid-row-end: 2;}.outline-2{    grid-row-start: 2;    grid-row-end: 3;}img{    max-width: 100%;}/* Code */pre{    margin: 1rem;    background-color: #EEE;    padding: 0.5rem;    border-radius: 0.2rem;    font-size: var(--font-size-small) !important;}.outline-3{    display: grid;    grid-template-columns: 40fr 60fr;} /* Responsive content positioning */@media only screen and (min-width: 750px) /* Large screens */{    .outline-3{        margin: 0vh 10vw;    }    .outline-text-2, #table-of-contents{        padding: 0vh 10vw;    }}@media only screen and (max-width: 750px) /* Small screens */{    .outline-3{        margin: 0vh 5vw;        display: block;    }    .outline-text-2, #table-of-contents{        padding: 0vh 5vw;    }}blockquote{    border-left: 0.2rem solid purple;    padding-left: 1rem;		font-style: italic;}p, pre, ol, ul, table, code{    color: #1A1A1A;}table, blockquote, pre, ol, ul, p, #postamble{    margin-top: 1rem;    margin-bottom: 1rem;}h1, h2, h3, h4, h5, h6{    color: #0A0A0A;}.tag{    margin-top: 0.5rem;    display: block;    color: white;    font-size: var(--font-size-xsmall);}.tag > span{		font-weight: 400;    font-size: 0.6rem;    background-color: purple;    text-transform: uppercase;    border-radius: 2px;    width: fit-content;    height: auto;    padding: 1px 5px;    margin: 1px;}/* Stripe table */tr:nth-child(even) {  background-color: #EEE;}.title{   padding: 2vh 5vw;}pre{		font-family: "Courier New", monospace;    font-size: var(--font-size-4)}.org-org-meta-line{    color: purple;}.org-keyword{    color: purple;}a{    color: purple;}.underline{    text-decoration: underline;}.todo{    color: #7D161A;		font-weight: 400;}.done{    color: purple;		font-weight: 400;}/* Postamble */#postamble{    text-align: center;    width: 100%;}#postamble > p{    display: inline;    font-size: var(--font-size-4)} .outline-text-2, .outline-text-3, .outline-text-4{ max-width: 100%; overflow-x: auto;}
</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">Emacs</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org1a5f4ba">1. Introduction</a></li>
<li><a href="#org47c4738">2. Better defaults</a>
<ul>
<li><a href="#org20220dc">2.1. Scrollbar</a></li>
<li><a href="#org21fff31">2.2. Fonts</a></li>
<li><a href="#org584876e">2.3. <span class="todo TODO">TODO</span> Enable ligatures</a></li>
<li><a href="#org6455fc4">2.4. Autosaves</a></li>
</ul>
</li>
<li><a href="#orgd3ccc81">3. General packages</a></li>
<li><a href="#org833aeeb">4. LSP</a></li>
<li><a href="#orgdedf653">5. Autocompletion</a></li>
<li><a href="#org7057f29">6. <code>org-publish</code></a></li>
</ul>
</div>
</div>

<div id="outline-container-org1a5f4ba" class="outline-2">
<h2 id="org1a5f4ba"><span class="section-number-2">1.</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
Welcome to my Emacs configuration! 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(require 'use-package)
(require 'use-package-ensure)
(setq use-package-always-ensure t)  
</pre>
</div>
</div>
</div>

<div id="outline-container-org47c4738" class="outline-2">
<h2 id="org47c4738"><span class="section-number-2">2.</span> Better defaults</h2>
<div class="outline-text-2" id="text-2">
<p>
This section contains what I consider as "better defaults", i.e. "what I want".
</p>
</div>

<div id="outline-container-org20220dc" class="outline-3">
<h3 id="org20220dc"><span class="section-number-3">2.1.</span> Scrollbar</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Or more accurately, "no scrollbar is the best scrollbar." Instead, we use nyan in our menubar.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(menu-bar-mode -1)
(tool-bar-mode -1)
(toggle-scroll-bar -1)  

(use-package nyan-mode
  :init
  (setq nyan-animate-nyancat 't)
  :config
  (nyan-mode))  
</pre>
</div>
</div>
</div>

<div id="outline-container-org21fff31" class="outline-3">
<h3 id="org21fff31"><span class="section-number-3">2.2.</span> Fonts</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Use the "right" font.
</p>
</div>
</div>

<div id="outline-container-org584876e" class="outline-3">
<h3 id="org584876e"><span class="section-number-3">2.3.</span> <span class="todo TODO">TODO</span> Enable ligatures</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-frame-font "PragmataPro Mono Liga" nil t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6455fc4" class="outline-3">
<h3 id="org6455fc4"><span class="section-number-3">2.4.</span> Autosaves</h3>
<div class="outline-text-3" id="text-2-4">
<p>
We keep the autosaves somewhere else.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq backup-by-copying t
      backup-directory-alist '(("." . "/tmp/emacs-saves/"))
      delete-old-versions t
      kept-new-versions 6
      kept-old-versions 2
      version-control t)
(setq auto-save-file-name-transforms
  `((".*" "/tmp/emacs-saves/" t)))

(load-theme 'nord t)  
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd3ccc81" class="outline-2">
<h2 id="orgd3ccc81"><span class="section-number-2">3.</span> General packages</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package evil
  :config
  (evil-mode))

(use-package projectile
  :config
  (projectile-mode))

(use-package org
  :init
  (setq org-agenda-files (list "~/org/personal.org"
			     "~/org/school.org"))
  :config
  (define-key global-map "\C-cl" 'org-store-link)
  (define-key global-map "\C-ca" 'org-agenda))

(use-package multi-vterm
  :config
  (define-key global-map "\C-c\C-v" 'vterm))

(use-package dashboard
  :config
  (dashboard-setup-startup-hook)
  :init
  (setq initial-buffer-choice (lambda () (get-buffer "*dashboard*")))
  (setq dashboard-banner-logo-title "Welcome to Emacs, Bob!")
  (setq dashboard-center-content t)
  (setq dashboard-startup-banner 'logo)
  (setq dashboard-items '((recents  . 10)
			(bookmarks . 5)
			(projects . 5)
			(agenda . 10)
			(registers . 5))))

(use-package projectile
  :init
  (projectile-mode)
  :bind (:map projectile-mode-map
	("s-p" . projectile-command-map)
	("C-c p" . projectile-command-map)))

(use-package restart-emacs
  :bind ("C-c C-f" . restart-emacs))

(use-package free-keys
  :commands free-keys)

(use-package ledger-mode
  :commands ledger-mode
  :init
  (setq ledger-clear-whole-transactions 1)
  :config
  (add-to-list 'evil-emacs-state-modes 'ledger-report-mode)
  :mode "\\.dat\\'")
</pre>
</div>
</div>
</div>

<div id="outline-container-org833aeeb" class="outline-2">
<h2 id="org833aeeb"><span class="section-number-2">4.</span> LSP</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (use-package lsp-mode
    :commands lsp
    :custom
    (lsp-rust-analyzer-cargo-watch-command "clippy")
    :config
    (add-hook 'lsp-mode-hook 'lsp-ui-mode)
    :hook
    ((
      nix-mode
      rustic-mode
      haskell-mode
      ) . lsp)
    )

(use-package rustic
  :bind (:map rustic-mode-map
	      ("M-j" . lsp-ui-imenu)
	      ("M-?" . lsp-find-references)
	      ("C-c C-c l" . flycheck-list-errors)
	      ("C-c C-c a" . lsp-execute-code-action)
	      ("C-c C-c r" . lsp-rename)
	      ("C-c C-c q" . lsp-workspace-restart)
	      ("C-c C-c Q" . lsp-workspace-shutdown)
	      ("C-c C-c s" . lsp-rust-analyzer-status)
	       ("&lt;f9&gt;" . rustic-cargo-run)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdedf653" class="outline-2">
<h2 id="orgdedf653"><span class="section-number-2">5.</span> Autocompletion</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company
  :after haskell-mode
  :custom
  (company-idle-delay 0.5) ;; how long to wait until popup
  :config
  (add-hook 'haskell-mode-hook
	  (lambda ()
	    (set (make-local-variable 'company-backends)
		 (append '((company-capf company-dabbrev-code))
			 company-backends))))
  ;; (company-begin-commands nil) ;; uncomment to disable popup
  :bind
  (:map company-active-map
	("C-n". company-select-next)
	("C-p". company-select-previous)
	("M-&lt;". company-select-first)
	("M-&gt;". company-select-last)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7057f29" class="outline-2">
<h2 id="org7057f29"><span class="section-number-2">6.</span> <code>org-publish</code></h2>
<div class="outline-text-2" id="text-6">
<p>
Add /etc/nixos as an org project to publish.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(require 'ox-publish)

(setq org-publish-project-alist
  '(
    ("org-notes"
     :base-directory "/etc/nixos"
     :base-extension "org"
     :publishing-directory "/etc/nixos/docs"
     :recursive t
     :publishing-function org-html-publish-to-html
     :headline-levels 4             ; Just the default for this project.
     :auto-preamble t
   )

   ("org-static"
    :base-directory "/etc/nixos/"
    :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf"
    :exclude ".direnv"
    :publishing-directory "/etc/nixos/docs"
    :recursive t
    :publishing-function org-publish-attachment
   )

   ("nixos" :components ("org-notes" "org-static"))
))
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2021-07-09 Fri 22:54</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
